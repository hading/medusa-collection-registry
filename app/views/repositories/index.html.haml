- model_class = Repository
.page-header
  %h1=t '.title', :default => model_class.model_name.human.pluralize

= render 'shared/definitions/repository'

%table.table.table-striped#repositories
  %thead
    %tr
      %th Title
      %th Contact
      %th URL
      %th Total Size (GB)
      %th
  %tbody
    - @repositories.each do |repository|
      %tr
        %td #{link_to repository.title, repository}
        %td #{net_id_search_link(repository.contact_net_id)}
        %td #{link_to_external repository.url, repository.url}
        %td #{repository.total_size.to_s(:rounded, precision: 2, delimiter: ',')}
        %td
          = link_to 'Edit', edit_repository_path(repository), :class => 'btn btn-mini'
          = link_to 'Delete', repository_path(repository), :method => :delete, :data => { :confirm => repository_confirm_message}, :class => 'btn btn-mini btn-danger'

%br

%div Total Medusa Size: #{Repository.aggregate_size.round} GB

%br

= link_to 'New Repository', new_repository_path, :class => 'btn btn-primary'
- if can? :update_ldap_admins, Repository
  = link_to 'Edit Repository Admins', edit_ldap_admins_repositories_path, :class => 'btn btn-primary'