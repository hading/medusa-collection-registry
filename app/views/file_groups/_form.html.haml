- url, method = @file_group.new_record? ? [file_groups_path(@file_group), :post] : [file_group_path(@file_group), :put]
= simple_form_for :file_group, :url => url, :method => method, :html => {:class => 'form-horizontal'} do |f|
  .row
    = render :partial => 'sidebar', :locals => {:f => f}
    .span9
      .tabbable
        = render :partial => 'shared/tab_header', :locals => {:id => 'edit-tabs', :tabs => file_group_form_tab_list}
        .tab-content
          #base.tab-pane.active
            = f.input :collection_id, :as => :hidden, :input_html => {:value => @collection.id}
            = f.input :name
            - if @file_group.new_record?
              = f.input :storage_level, :as => :select, :include_blank => false, :collection => FileGroup::STORAGE_LEVELS
            - else
              = f.input :storage_level, :disabled => true
            = f.input :producer_id, :collection => producers_select_collection
            = f.input :file_type_id, :collection => file_types_select_collection
            = f.input :external_file_location
            = f.input :staged_file_location
            = f.input :cfs_root, :as => :select, :include_blank => true, :collection => cfs_directory_select_collection
            = f.input :file_format
            = f.input :total_file_size, :label => 'Total file size (GB)'
            = f.input :total_files
          #summary.tab-pane
            = f.input :summary
          #provenance-note.tab-pane
            = f.input :provenance_note, :label => 'Provenance Note'
          #rights-declaration.tab-pane
            = render :partial => 'rights_declarations/nested_form', :locals => {:containing_form => f, :rights_declaration => @file_group.rights_declaration}
          #collection-file-package-summary.tab-pane
            = f.simple_fields_for :collection, @collection do |c|
              = c.input :file_package_summary, :label => "Collection File Package Summary"
          = render :partial => 'form_related_file_groups'








