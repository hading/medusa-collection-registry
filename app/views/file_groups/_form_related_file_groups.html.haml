-# we bypass the simple_form convenience stuff here in order to do the Note field on the related file group join properly
-# the controllers also deal with this
-# note that we do (as much as possible) keep ids/names as they were generated by simple_form, just do it manually.
.control-group.check_boxes.optional
  %label.check_boxes.optional.control-label
    Related file groups
  %br
  %br
  .controls
    - @file_group.potential_target_file_groups.each do |target_file_group|
      .row
        .span3
          %label.checkbox
            %input.check_boxes.optional{:id => "file_group_related_file_group_ids_#{target_file_group.id}",
              :value => target_file_group.id, :type => 'checkbox',
              :name => "file_group[target_file_group_ids][]",
              :checked => @file_group.has_target?(target_file_group)}
            #{target_file_group.name} (#{target_file_group.storage_level})
        .span4
          %label.text
            Note
            %input.string.optional{:size => 50, :type => 'text', :value => @file_group.target_relation_note(target_file_group),
              :name => "file_group[target_file_group_notes][#{target_file_group.id}]",
              :id => "file_group_target_file_group_notes_#{target_file_group.id}"}
    %input{:name => "file_group[target_file_group_ids][]", :type => 'hidden', :value => ''}
