%ul.nav.nav-tabs#search_tables
  - @helpers.each.with_index do |helper, i|
    %li
      %a{href: "##{helper.tab_id}", 'data-toggle' => 'tab', title: helper.tab_label}= helper.tab_label

.tab-content
  - @helpers.each do |helper|
    .tab-pane{id: helper.tab_id}
      %table.table.table-striped{id: helper.table_id}
        %thead
          %tr
            - helper.headers.each do |header|
              %th= header
      :javascript
        $(document).ready(function() {
          $("##{helper.table_id}").DataTable({
            "processing": true,
            "serverSide": true,
            "pageLength": 25,
            "order" : [[0, 'asc']],
            "search": {
              "search": "#{helper.initial_search_string}"
            },
            "ajax": {
              "url": "#{helper.url}"
            }
          })
        });

-# kludge to get the tab to actually show
:javascript
  $(function() {
    $("a[title='#{@helpers.first.tab_label}']").trigger('click');
  });
