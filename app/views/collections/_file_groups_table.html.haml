%h2 File Groups

= link_to 'Add File Group', new_file_group_path(:collection_id => @collection.id), :class => 'btn btn-primary btn-mini'

- if @collection.file_groups.present?
  %table#file_groups.table.table-striped
    %thead
      %tr
        %th Id
        %th Name
        %th Storage Level
        %th Type
        %th Producer
        %th Total files
        %th Total file size (GB)
        %th Related File Groups
        %th Actions
    %tbody
      - @collection.file_groups.order('created_at').each do |file_group|
        %tr
          %td #{file_group.id}
          %td
            #{link_to file_group.name, file_group}
            - if file_group.cfs_root.present?
              %div= link_to 'View files', cfs_show_path(:path => file_group.cfs_root)
          %td #{file_group.storage_level}
          %td #{file_group.file_type_name}
          %td #{link_to(file_group.producer.title, file_group.producer) if file_group.producer}
          %td #{file_group.total_files}
          %td #{file_group.total_file_size}
          %td.related_file_groups
            - file_group.source_file_groups.each do |source_file_group|
              %div= link_to file_group.source_relation_note(source_file_group).if_blank(source_file_group.id.to_s), source_file_group
            - file_group.target_file_groups.each do |target_file_group|
              %div= link_to file_group.target_relation_note(target_file_group).if_blank(target_file_group.id.to_s), target_file_group
          %td
            = render 'file_group_actions', :file_group => file_group
