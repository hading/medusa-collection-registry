- if @subheader
  - content_for(:page_header_extra) do
    %p= @subheader
= render layout: 'layouts/page_header' do
  Collections

= link_to 'Add Collection', new_collection_path, class: 'btn btn-primary'
= link_to(collections_path(format: 'csv'), class: 'btn btn-default') do
  %span.glyphicon.glyphicon-export
  Export as CSV

%table#collections.table.table-striped
  %thead
    %tr
      %th
      %th
      %th
      %th
      %th
      %th
      %th
      %th
    %tr
      %th External ID
      %th UUID
      %th Title
      %th Repository
      %th Contact
      %th Total Size (GB)
      %th Preservation Priority
      %th
  - cache(cache_key_for_all(Repository)) do
    %tbody
      - @collections.each do |collection|
        - cache([collection, collection.repository]) do
          %tr
            %td #{collection.external_id}
            %td #{collection.uuid}
            %td #{link_to collection.title, collection}
            %td #{link_to collection.repository.title, collection.repository}
            %td #{collection.contact_email}
            %td #{number_with_precision(collection.total_size, precision: 3)}
            %td #{collection.preservation_priority_name}
            %td
              = link_to t('.edit', default: t('helpers.links.edit')), edit_collection_path(collection), class: 'btn btn-default btn-xs'

%br

= link_to 'Add Collection', new_collection_path, class: 'btn btn-primary'