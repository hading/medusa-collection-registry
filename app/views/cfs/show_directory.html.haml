= render 'show_breadcrumbs'

.pull-right
  = link_to 'Create FITS for tree', cfs_create_fits_for_tree_path(:path => @path), :method => 'post', :class => 'btn'

%h3 Directory: #{File.basename(@path)}
- if @file_group
  %h4 File Group: #{link_to @file_group.name, file_group_path(@file_group)}

%h4 Subdirectories
%table#subdirectories.table.table-striped
  %thead
    %tr
      %th Name
  %tbody
    - @subdirectories.each do |subdirectory|
      %tr
        %td= link_to subdirectory[:name], cfs_show_path(:path => subdirectory[:path])

%hr

%h4 Files
%table#files.table.table-striped
  %thead
    %tr
      %th Name
      %th Size
      %th Last Modified
      %th FITS
  %tbody
    - @files.each do |file|
      %tr
        %td= link_to file[:name], cfs_show_path(:path => file[:path])
        %td= file[:stat].size
        %td= file[:stat].mtime
        %td
          - if cfs_file_info = CfsFileInfo.find_by_path(file[:path]) and cfs_file_info.fits_xml
            = link_to 'View XML', cfs_fits_info_path(:path => file[:path])
          - else
            = link_to 'Create XML', cfs_create_fits_info_path(:path => file[:path], method: 'post')